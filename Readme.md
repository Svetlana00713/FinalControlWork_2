# Итоговая работа по блоку специализация
## Ход выполнения
### Linux
1. **Используя команду cat в терминале операционной системы Linux, создать два файла: Домашние животные (заполнив файл собаками, кошками, хомяками) и Вьючные животные, (заполнив файл лошадьми, верблюдами и ослами), а затем объединить их. Просмотреть содержимое созданного файла. Переименовать файл, дав ему новое имя (Друзья человека).**
```
     cat > "Домашние животные.txt"

     Собаки

     Кошки

     Хомяки

     cat > "Вьючные животные.txt"

     Лошади

     Верблюды

     Ослы

     cat "Домашние животные.txt" "Вьючные животные.txt" > "Животные.txt"

     cat "Животные.txt"

     mv "Животные.txt" "Друзья человека.txt"
```
2. **Создать директорию, переместить файл туда.**
```
     mkdir Final_control_work

     mv "Друзья человека.txt" Final_control_work/
```
3. **Подключить дополнительный репозиторий MySQL. Установить любой пакет из этого репозитория.**
```
     sudo wget https://dev.mysql.com/get/mysql-apt-config_0.8.17-1_all.deb

     sudo dpkg -i mysql-apt-config_0.8.17-1_all.deb
```
4. **Установить и удалить deb-пакет с помощью dpkg.**
```
     wget http://ftp.us.debian.org/debian/pool/main/s/sl/sl_5.02-1_amd64.deb

     sudo dpkg -i sl_5.02-1_amd64.deb

     sl

     sudo dpkg -r sl
```
5. **Выложить историю команд в терминале ubuntu.**

![История команд](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/Linux/Screens/5.png)

### MySQL

6. **Нарисовать диаграмму, в которой есть классы: родительский класс, "Домашние животные" и "Вьючные животные", в составы которых в случае "Домашних животных" войдут классы: "Собаки", "Кошки", "Хомяки", а в класс "Вьючные животные" войдут: "Лошади", "Верблюды" и "Ослы".**

![Human_friends](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/Diagramms/Human_friends.png)

7. **В подключенном MySQL репозитории создать базу данных “Друзья человека”.**

![Вход в репозиторий](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/1.png)
![Создание БД](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/2.png)

8. **Создать таблицы с иерархией из диаграммы в БД.**

[Script.sql](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Script.sql)

![Таблицы](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/3.png)

9. **Заполнить низкоуровневые таблицы именами животных, командами, которые они выполняют, и датами рождения.**

![Таблица "Pets"](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/4.png)

10. **Удалить из таблицы верблюдов, т.к. верблюдов решили перевезти в другой питомник на зимовку. Объединить таблицы "Лошади" и "Ослы" в одну таблицу.**

![Результат операции](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/5.png)

11. **Создать новую таблицу “Молодые животные”, в которую попадут все животные старше 1 года, но младше 3 лет, и в отдельном столбце с точностью до месяца подсчитать возраст животных в новой таблице.**

![Таблица young_animals и выборка из нее](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/6.png)

12. **Объединить все таблицы в одну, при этом сохраняя поля, указывающие на прошлую принадлежность к старым таблицам.**

![Объединенная таблица](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/MySQL/Screens/7.png)

### Java

13. **Создать класс с инкапсуляцией методов и наследованием по диаграмме.**

![Инкапсулированная иерархия](https://github.com/Svetlana00713/FinalControlWork_2/blob/master/Diagramms/Incapsulated%20hierarchy.jpg)

14. **Написать программу, имитирующую работу реестра домашних животных. В программе должен быть реализован следующий функционал:**

***14.1. Завести новое животное***

Использован метод addAnimal() в Presenter, выполняют служебные классы Counter, Constructor.

***14.2. Определять животное в правильный класс***

Выполняет класс Constructor, а также Converter, отвечающий за распознавание текстовых названий из файла.

***14.3. Увидеть список команд, которое выполняет животное***

Выводится при выборе пункта меню "Работа с конкретным животным."

***14.4. Обучить животное новым командам***

Добавляется в список команд через setCommands() класса Animal.

***14.5. Реализовать навигацию по меню***

Осуществляется через консольный ввод номеров пунктов в Menu и управлением в Presenter через switch.

***Пояснения к реализации***

+ Программа спроектирована по паттерну MVP(Model-View-Presenter).

+ View содержит классы Menu и DataValidator, отвечающие за взаимодействие с пользователем.

+ Model содержит информационные классы иерархии и служебные классы пакета Services для работы с базой данных.

+ Presenter получает данные от Model, форматирует их и передает View для отображения. Он также обрабатывает пользовательский ввод, передавая соответствующие команды модели для обновления данных. Текущие объекты Animals обрабатываются через HashMap <Id,Animal>.  

+ Точка входа -запуск Main.java в папке src.

+ Текущее состояние питомника сохраняется в файлах .txt (animals_registry.txt по умолчанию).

15. **Создайте класс Счетчик, у которого есть метод add(), увеличивающий̆ значение внутренней̆ int переменной на 1 при выборе пункта “Завести новое животное”. Сделайте так, чтобы с объектом такого типа можно было работать в блоке try-with-resources. Нужно бросить исключение, если работа с объектом типа "счетчик" была не в ресурсном try и/или ресурс остался открыт. Значение считать в ресурсе try, если при заведения животного заполнены все поля.**

***Имплементация***

Класс cчетчикa Counter.java имплементируется в интерфейс AutoClosable для работы с try-with. При завершении работы счетчик обнуляется.
Для запрета использования вне блока делаем кастомное исключение из иерархии проверяемых в методе add().
Чтобы сохранялось постоянство состояния счетчика в процессе работы, поле сделано static.

```
throws new CounterException()
```







